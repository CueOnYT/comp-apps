<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Devin Casino — Polished Single File</title>
<style>
:root{--bg:#050612;--accent:#1c7dff;--accent2:#60a5ff;--text:#e6f0ff;--muted:#9fb7e6;--shadow:0 10px 30px rgba(28,125,255,0.18);--card:#071229}
*{box-sizing:border-box}html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:
radial-gradient(800px 400px at 10% 5%, rgba(28,125,255,0.04), transparent),linear-gradient(180deg,#020617,#061027);color:var(--text)}
a{color:inherit;text-decoration:none}
.app{max-width:1180px;margin:18px auto;padding:14px}
.header{display:flex;justify-content:space-between;align-items:center;gap:12px}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:grid;place-items:center;color:#001229;font-weight:800}
.title h1{margin:0;font-size:18px} .title p{margin:0;color:var(--muted);font-size:12px}
.top-actions{display:flex;gap:8px;align-items:center}
.balance{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:10px;border-radius:10px;border:1px solid rgba(96,165,255,0.08)}
.nav{display:flex;flex-wrap:wrap;gap:8px;margin:14px 0}
.tab{padding:10px 12px;border-radius:10px;background:linear-gradient(180deg,#071229,#041025);border:1px solid rgba(96,165,255,0.08);cursor:pointer}
.tab.active{transform:translateY(-3px);box-shadow:0 16px 40px rgba(28,125,255,0.12);border-color:var(--accent2)}
.container{display:grid;grid-template-columns:1fr 340px;gap:14px}
.panel{background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);padding:14px;border-radius:12px;border:1px solid rgba(96,165,255,0.06);box-shadow:var(--shadow)}
.right .card{margin-bottom:12px}
.controls{display:flex;gap:8px;align-items:center}
.input{background:transparent;border:1px solid rgba(96,165,255,0.06);padding:8px;border-radius:8px;color:var(--text)}
.btn{background:linear-gradient(180deg,var(--accent),var(--accent2));border:none;padding:10px 12px;border-radius:8px;color:#001229;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid rgba(96,165,255,0.06);color:var(--text)}
.card{padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(96,165,255,0.04)}
.reel{height:110px;display:grid;place-items:center;font-size:56px;border-radius:10px;border:1px solid rgba(96,165,255,0.06);background:radial-gradient(200px 100px at 50% 0%, rgba(96,165,255,0.04), transparent)}
.small{font-size:13px;color:var(--muted)}
.cards-row{display:flex;gap:8px;align-items:center;margin-top:8px}
.cardv{width:64px;height:88px;border-radius:8px;background:#071532;display:grid;place-items:center;border:1px solid rgba(96,165,255,0.06)}
.board{display:grid;gap:4px;margin-top:8px}
.sq{width:48px;height:48px;display:grid;place-items:center;border-radius:6px;cursor:pointer}
#pool-c{width:100%;border-radius:10px;background:#071834;border:1px solid rgba(96,165,255,0.06)}
.chips{display:flex;gap:6px}
.chip{width:36px;height:36px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(180deg,#0b2a6a,#06203d);border:2px solid rgba(96,165,255,.16);font-weight:700}
@media (max-width:980px){.container{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div class="brand">
      <div class="logo">DS</div>
      <div class="title"><h1>Devin Casino</h1><p>by Devin Slifer — Computer Apps Project</p></div>
    </div>
    <div class="top-actions">
      <div class="balance card"><div class="small">Shared Balance</div><div id="bal" style="font-weight:800">$1,000</div></div>
      <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
        <div style="display:flex;gap:6px"><button class="btn" id="add100">+100</button><button class="btn ghost" id="reset">Reset</button></div>
        <div style="display:flex;gap:8px"><label class="small"><input type="checkbox" id="snd" checked> Sounds</label><label class="small"><input type="checkbox" id="vfx" checked> VFX</label></div>
      </div>
    </div>
  </div>

  <div class="nav" id="nav"></div>

  <div class="container">
    <div class="panel" id="main"></div>
    <div class="right">
      <div class="card"><strong>Quick Chips</strong><div class="chips" id="quick-chips" style="margin-top:8px"></div></div>
      <div class="card"><strong>Info</strong><div class="small" style="margin-top:6px">Shared balance across all games. No real money. Good luck!</div></div>
      <div class="card"><button class="btn ghost" id="rules">Rules & Payouts</button></div>
    </div>
  </div>

  <div style="margin-top:14px;text-align:center;color:var(--muted)" class="small">Made by Devin Slifer — Age 14 • Add this file to GitHub Pages as index.html</div>
</div>

<script>
/* Shared bank & UI */
let BAL = 1000;
const format = n=> '$' + Number(n).toLocaleString();
function updateBal(){ document.getElementById('bal').textContent = format(BAL); }
updateBal();
document.getElementById('add100').onclick = ()=>{ BAL += 100; updateBal(); };
document.getElementById('reset').onclick = ()=>{ if(confirm('Reset balance to $1000?')){ BAL = 1000; updateBal(); } };
const snd = document.getElementById('snd'), vfx = document.getElementById('vfx');
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep(freq=440,d=0.08,t='sine',vol=0.06){ if(!snd.checked) return; const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.type=t; o.frequency.value=freq; g.gain.value=vol; o.connect(g); g.connect(audioCtx.destination); o.start(); g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+d); o.stop(audioCtx.currentTime+d+0.02); }

/* SPA setup */
const GAMES = [
  {id:'Slots', fn:initSlots},
  {id:'Blackjack', fn:initBlackjack},
  {id:'Roulette', fn:initRoulette},
  {id:'Video Poker', fn:initVPoker},
  {id:'Minesweeper', fn:initMines},
  {id:'Checkers', fn:initCheckers},
  {id:'Chess', fn:initChess},
  {id:'Pool', fn:initPool}
];
const nav = document.getElementById('nav'), main = document.getElementById('main');
GAMES.forEach(g=>{ const b=document.createElement('button'); b.className='tab'; b.textContent=g.id; b.onclick=()=>{ [...nav.children].forEach(x=>x.classList.remove('active')); b.classList.add('active'); g.fn(main); }; nav.appendChild(b); });
nav.children[0].click();

/* Quick chip buttons */
const quick = document.getElementById('quick-chips');
[10,25,50,100].forEach(v=>{ const d=document.createElement('div'); d.className='chip'; d.textContent=v; d.onclick=()=>{ BAL += v; updateBal(); }; quick.appendChild(d); });

/* Utilities */
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }

/* ----------------- SLOTS ----------------- */
function initSlots(root){
  root.innerHTML = `<div class="card"><div style="display:flex;gap:12px;align-items:flex-start">
    <div style="flex:1">
      <div class="reel" id="slot-reel">🍒 🍋 🔔</div>
      <div class="controls" style="margin-top:10px"><input id="slot-bet" class="input" type="number" value="10"><button class="btn" id="slot-spin">Spin</button><button class="btn ghost" id="slot-auto">Auto</button><div id="slot-msg" class="small" style="margin-left:auto"></div></div>
    </div>
    <div style="width:280px"><strong>Payouts</strong><ul class="small"><li>💎 ×25</li><li>🍒 ×10</li><li>🔔 ×8</li><li>🍋 ×6</li><li>⭐ ×5</li></ul></div>
  </div></div>`;
  const symbols=['🍒','🍋','🔔','⭐','💎']; const weights={'🍒':5,'🍋':4,'🔔':3,'⭐':2,'💎':1}; const payout={'🍒':10,'🍋':6,'🔔':8,'⭐':5,'💎':25};
  const reel = root.querySelector('#slot-reel'), betIn=root.querySelector('#slot-bet'), spin=root.querySelector('#slot-spin'), auto=root.querySelector('#slot-auto'), msg=root.querySelector('#slot-msg');
  function bag(){ const b=[]; for(const s of symbols) for(let i=0;i<weights[s];i++) b.push(s); return b; }
  let autoTimer=null;
  spin.onclick = ()=>{ const bet = Math.floor(+betIn.value||0); if(bet<=0 || bet>BAL){ msg.textContent='Invalid bet'; beep(200,0.06); return; } BAL -= bet; updateBal(); const b=bag(); const res=[b[Math.floor(Math.random()*b.length)],b[Math.floor(Math.random()*b.length)],b[Math.floor(Math.random()*b.length)]]; if(vfx.checked){ let i=0; const t=setInterval(()=>{ reel.textContent = symbols[Math.floor(Math.random()*symbols.length)]; i++; if(i>10){ clearInterval(t); reel.textContent=res.join(' '); finalize(); } },45); } else { reel.textContent = res.join(' '); finalize(); } function finalize(){ let win=0; if(res[0]===res[1] && res[1]===res[2]){ win = bet * payout[res[0]]; BAL += win; msg.textContent = 'Win '+format(win); beep(900,0.08,'square'); } else { msg.textContent='No win'; beep(120,0.04,'sine'); } updateBal(); } };
  auto.onclick = ()=>{ if(autoTimer){ clearInterval(autoTimer); autoTimer=null; auto.textContent='Auto'; } else { autoTimer=setInterval(()=>{ if(BAL<=0){ clearInterval(autoTimer); autoTimer=null; auto.textContent='Auto'; return; } spin.click(); },700); auto.textContent='Stop'; } };
}

/* ----------------- BLACKJACK ----------------- */
function initBlackjack(root){
  root.innerHTML = `<div class="card"><div><div class="small">Dealer</div><div id="bj-dealer" class="cards-row"></div><div class="small">Player</div><div id="bj-player" class="cards-row"></div>
  <div class="controls" style="margin-top:8px"><input id="bj-bet" class="input" type="number" value="25"><button class="btn" id="bj-deal">Deal</button><button class="btn ghost" id="bj-hit" disabled>Hit</button><button class="btn ghost" id="bj-stand" disabled>Stand</button><button class="btn ghost" id="bj-dbl" disabled>Double</button><div id="bj-msg" class="small" style="margin-left:auto"></div></div></div></div>`;
  const deckRanks=['A','2','3','4','5','6','7','8','9','10','J','Q','K'], suits=['♠','♥','♦','♣'];
  function makeShoe(){ const s=[]; for(let d=0;d<4;d++) for(const r of deckRanks) for(const su of suits) s.push({r, su}); return shuffle(s); }
  let shoe = makeShoe(); function draw(){ if(shoe.length<40) shoe = makeShoe(); return shoe.pop(); }
  const dealerEl = root.querySelector('#bj-dealer'), playerEl = root.querySelector('#bj-player');
  const betIn=root.querySelector('#bj-bet'), deal=root.querySelector('#bj-deal'), hit=root.querySelector('#bj-hit'), stand=root.querySelector('#bj-stand'), dbl=root.querySelector('#bj-dbl'), msg=root.querySelector('#bj-msg');
  function valHand(h){ let total=0, aces=0; for(const c of h){ if(c.r==='A'){ aces++; total+=11; } else if(['J','Q','K'].includes(c.r)) total+=10; else total+=Number(c.r); } while(total>21 && aces>0){ total-=10; aces--; } return total; }
  let player=[], dealer=[], bet=0, active=false;
  function render(){ dealerEl.innerHTML=''; playerEl.innerHTML=''; dealer.forEach((c,i)=>{ const e=document.createElement('div'); e.className='cardv'; e.textContent = (active && i===0)? '🂠' : (c.r+c.su); dealerEl.appendChild(e); }); player.forEach(c=>{ const e=document.createElement('div'); e.className='cardv'; e.textContent = c.r + c.su; playerEl.appendChild(e); }); }
  deal.onclick = ()=>{ if(active) return; const b=Math.floor(+betIn.value||0); if(b<=0 || b>BAL){ msg.textContent='Invalid bet'; beep(200); return; } BAL-=b; bet=b; player=[]; dealer=[]; active=true; player.push(draw(),draw()); dealer.push(draw(),draw()); render(); hit.disabled=stand.disabled=dbl.disabled=false; updateBal(); if(valHand(player)===21) endRound(); };
  hit.onclick = ()=>{ if(!active) return; player.push(draw()); render(); if(valHand(player)>21) endRound(); };
  stand.onclick = ()=>{ if(!active) return; dealerTurn(); };
  dbl.onclick = ()=>{ if(!active) return; if(BAL<bet){ msg.textContent='Not enough to double'; return; } BAL-=bet; bet*=2; player.push(draw()); render(); updateBal(); if(valHand(player)>21) endRound(); else dealerTurn(); };
  function dealerTurn(){ hit.disabled=stand.disabled=dbl.disabled=true; active=false; render(); while(valHand(dealer)<17){ dealer.push(draw()); render(); } endRound(); }
  function endRound(){ const p=valHand(player), d=valHand(dealer); let win=0, text='Push'; const isBJ = p===21 && player.length===2; const dealerBJ = d===21 && dealer.length===2; if(p>21) text='Bust'; else if(d>21){ text='Dealer busts'; win = bet*2; } else if(isBJ && !dealerBJ){ text='Blackjack'; win = Math.floor(bet*2.5); } else if(dealerBJ && !isBJ){ text='Dealer blackjack'; } else if(p>d){ text='Player wins'; win = bet*2; } else if(d>p){ text='Dealer wins'; } else { text='Push'; win = bet; } if(win) BAL += win; msg.textContent = text + (win?(' (+$'+win+')'): ''); updateBal(); beep(win?800:120,0.06, win? 'square':'sine'); hit.disabled=stand.disabled=dbl.disabled=true; active=false; }
}

/* ----------------- ROULETTE ----------------- */
function initRoulette(root){
  root.innerHTML = `<div class="card"><div style="display:flex;gap:12px;align-items:flex-start">
    <div style="width:200px;text-align:center"><div id="rl-res" style="font-size:36px">–</div><div class="small">Wheel</div></div>
    <div style="flex:1">
      <div class="small">Pick bets</div><div id="rl-grid" style="display:grid;grid-template-columns:repeat(6,1fr);gap:6px;margin-top:8px"></div>
      <div class="controls" style="margin-top:8px"><input id="rl-bet" class="input" type="number" value="10"><button class="btn" id="rl-spin">Spin</button><div id="rl-msg" class="small" style="margin-left:auto"></div></div>
    </div>
  </div></div>`;
  const grid = root.querySelector('#rl-grid'), resEl = root.querySelector('#rl-res'), betIn=root.querySelector('#rl-bet'), spin=root.querySelector('#rl-spin'), msg=root.querySelector('#rl-msg');
  const nums = Array.from({length:37},(_,i)=>i); const red = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
  let bets = new Set();
  function cell(label,k){ const c=document.createElement('div'); c.className='card'; c.textContent = label; c.style.padding='8px'; c.onclick=()=>{ if(c.classList.toggle('active')) bets.add(k); else bets.delete(k); }; return c; }
  for(let i=1;i<=36;i++) grid.appendChild(cell(i,'n:'+i));
  grid.appendChild(cell('0','n:0')); grid.appendChild(cell('RED','red')); grid.appendChild(cell('BLK','black')); grid.appendChild(cell('EVEN','even')); grid.appendChild(cell('ODD','odd'));
  spin.onclick = ()=>{ const stake = Math.floor(+betIn.value||0); if(stake<=0 || bets.size===0){ msg.textContent='Choose bets & stake'; beep(160); return; } const total = stake * bets.size; if(total>BAL){ msg.textContent='Not enough balance'; beep(160); return; } BAL -= total; updateBal(); const n = nums[Math.floor(Math.random()*nums.length)]; const isRed = red.has(n); let win=0; for(const k of bets){ if(k.startsWith('n:')){ if(+k.split(':')[1]===n) win += stake*36; } else if(k==='red' && isRed) win += stake*2; else if(k==='black' && !isRed && n!==0) win += stake*2; else if(k==='even' && n!==0 && n%2===0) win += stake*2; else if(k==='odd' && n%2===1) win += stake*2; } if(win) BAL += win; resEl.textContent = n + (isRed?' 🔴':(n===0?' ⚪':' ⚫')); msg.textContent = win?('Win '+format(win)):'No win'; updateBal(); beep(win?900:140,0.08, win? 'square':'sine'); };
}

/* ----------------- VIDEO POKER ----------------- */
function initVPoker(root){
  root.innerHTML = `<div class="card"><div class="controls"><input id="vp-bet" class="input" type="number" value="5"><button class="btn" id="vp-deal">Deal/Draw</button><button class="btn ghost" id="vp-holdall">Toggle Hold</button><div id="vp-msg" class="small" style="margin-left:auto"></div></div><div id="vp-cards" class="cards-row" style="margin-top:10px"></div></div>`;
  const ranks=['2','3','4','5','6','7','8','9','10','J','Q','K','A'], suits=['♠','♥','♦','♣'];
  function deck(){ const d=[]; for(const r of ranks) for(const s of suits) d.push({r,s}); return shuffle(d); }
  const cards = root.querySelector('#vp-cards'), betIn=root.querySelector('#vp-bet'), deal=root.querySelector('#vp-deal'), holdAll=root.querySelector('#vp-holdall'), msg=root.querySelector('#vp-msg');
  let d=[], hand=[null,null,null,null,null], held=[false,false,false,false,false], phase='bet', bet=0;
  function render(){ cards.innerHTML=''; for(let i=0;i<5;i++){ const c=hand[i]; const el=document.createElement('div'); el.className='cardv'; el.textContent = c ? (c.r+c.s) : '🂠'; el.onclick = ()=>{ if(phase==='draw'){ held[i]=!held[i]; el.style.opacity = held[i]?0.6:1; } }; cards.appendChild(el); } }
  function rankCounts(h){ const m=new Map(); for(const c of h) m.set(c.r,(m.get(c.r)||0)+1); return m; }
  function isFlush(h){ return new Set(h.map(c=>c.s)).size===1; }
  function toOrder(r){ return ranks.indexOf(r); }
  function isStraight(h){ const a=h.map(c=>toOrder(c.r)).sort((x,y)=>x-y); const low=[0,1,2,3,12]; if(JSON.stringify(a)===JSON.stringify(low)) return true; for(let i=1;i<a.length;i++) if(a[i]!==a[i-1]+1) return false; return true; }
  function score(h){ const flush=isFlush(h), straight=isStraight(h); const counts=[...rankCounts(h).values()].sort((a,b)=>b-a).join(','); if(straight && flush && h.some(c=>c.r==='A') && h.some(c=>c.r==='10')) return ['Royal Flush',250]; if(straight&&flush) return ['Straight Flush',50]; if(counts==='4,1') return ['Four of a Kind',25]; if(counts==='3,2') return ['Full House',9]; if(flush) return ['Flush',6]; if(straight) return ['Straight',4]; if(counts==='3,1,1') return ['Three of a Kind',3]; if(counts==='2,2,1') return ['Two Pair',2]; if(counts==='2,1,1,1'){ const r=[...rankCounts(h).entries()].find(([r,c])=>c===2)[0]; if(['J','Q','K','A'].includes(r)) return ['Jacks or Better',1]; } return ['No Win',0]; }
  deal.onclick = ()=>{ if(phase==='bet'){ const b=Math.floor(+betIn.value||0); if(b<=0 || b>BAL){ msg.textContent='Invalid bet'; beep(160); return; } bet=b; BAL-=b; updateBal(); d=deck(); hand=[]; for(let i=0;i<5;i++) hand.push(d.pop()); held=[false,false,false,false,false]; phase='draw'; render(); msg.textContent='Select holds then press Deal/Draw'; } else { for(let i=0;i<5;i++) if(!held[i]) hand[i]=d.pop(); const [name,mult]=score(hand); const win = mult * bet; if(win>0) BAL += win; msg.textContent = name + (win?(' - Win '+format(win)): ''); updateBal(); phase='bet'; render(); } };
  holdAll.onclick = ()=>{ if(phase==='draw'){ held = held.map(v=>!v); render(); } };
  render();
}

/* ----------------- MINESWEEPER ----------------- */
function initMines(root){
  root.innerHTML = `<div class="card"><div style="display:flex;gap:8px;align-items:center"><label class="small">Rows <input id="mr" class="input" type="number" value="8" min="5" max="16" style="width:72px"></label><label class="small">Cols <input id="mc" class="input" type="number" value="8" min="5" max="20" style="width:72px"></label><label class="small">Mines <input id="mm" class="input" type="number" value="10" min="1" style="width:72px"></label><button class="btn" id="mnew">New</button><div id="mmsg" class="small" style="margin-left:auto"></div></div><div id="mboard" class="board" style="margin-top:10px"></div></div>`;
  const boardEl = root.querySelector('#mboard'), rowsIn=root.querySelector('#mr'), colsIn=root.querySelector('#mc'), minesIn=root.querySelector('#mm'), newBtn=root.querySelector('#mnew'), msg=root.querySelector('#mmsg');
  let R=8,C=8,M=10, grid=[], started=false, revealed=0, finished=false;
  function idx(r,c){ return r*C+c; }
  function inb(r,c){ return r>=0&&r<R&&c>=0&&c<C; }
  function neigh(r,c){ const out=[]; for(let dr=-1;dr<=1;dr++) for(let dc=-1;dc<=1;dc++) if(!(dr===0&&dc===0)){ const nr=r+dr,nc=c+dc; if(inb(nr,nc)) out.push([nr,nc]); } return out; }
  function place(r0,c0){ let left=M; while(left>0){ const r=Math.floor(Math.random()*R), c=Math.floor(Math.random()*C); if((r===r0 && c===c0) || grid[idx(r,c)].mine) continue; grid[idx(r,c)].mine=true; left--; } }
  function calc(){ for(let r=0;r<R;r++) for(let c=0;c<C;c++){ if(grid[idx(r,c)].mine) continue; grid[idx(r,c)].count = neigh(r,c).reduce((s,[nr,nc])=> s + (grid[idx(nr,nc)].mine?1:0),0); } }
  function reveal(r,c){ if(finished) return; const cell = grid[idx(r,c)]; if(cell.revealed||cell.flag) return; cell.revealed=true; revealed++; if(cell.mine){ finished=true; msg.textContent='BOOM!'; revealAll(); beep(120); draw(); return; } if(cell.count===0) neigh(r,c).forEach(([nr,nc])=> reveal(nr,nc)); if(revealed===R*C-M){ finished=true; msg.textContent='You Win!'; revealAll(); beep(900); } draw(); }
  function revealAll(){ grid.forEach(g=>g.revealed=true); draw(); }
  function toggleFlag(r,c){ if(grid[idx(r,c)].revealed||finished) return; grid[idx(r,c)].flag=!grid[idx(r,c)].flag; draw(); }
  function draw(){ boardEl.innerHTML=''; boardEl.style.gridTemplateColumns = `repeat(${C}, 36px)`; for(let r=0;r<R;r++) for(let c=0;c<C;c++){ const cell=grid[idx(r,c)]; const el=document.createElement('div'); el.className='sq'; el.style.width='36px'; el.style.height='36px'; el.style.margin='2px'; el.style.border='1px solid rgba(96,165,255,0.06)'; el.style.display='grid'; el.style.placeItems='center'; el.style.borderRadius='6px'; el.style.background = cell.revealed? '#06203a':'#07142a'; if(cell.revealed){ if(cell.mine){ el.textContent='💣'; el.style.background='#3b0f14'; } else if(cell.count) el.textContent=cell.count; } else if(cell.flag) el.textContent='🚩'; el.onclick = ()=>{ if(!started){ place(r,c); calc(); started=true; } reveal(r,c); }; el.oncontextmenu = (ev)=>{ ev.preventDefault(); toggleFlag(r,c); }; boardEl.appendChild(el); } }
  function reset(){ R=Math.max(5,Math.min(16, +rowsIn.value||8)); C=Math.max(5,Math.min(20,+colsIn.value||8)); M=Math.min(+minesIn.value||10, R*C-1); grid = Array.from({length:R*C}, ()=>({mine:false,revealed:false,flag:false,count:0})); started=false; revealed=0; finished=false; msg.textContent='Left-click reveal • Right-click flag'; draw(); }
  newBtn.onclick = reset; reset();
}

/* ----------------- CHECKERS ----------------- */
function initCheckers(root){
  root.innerHTML = `<div class="card"><div style="display:flex;gap:8px;align-items:center"><div id="ckturn">Turn: 🔵</div><button class="btn ghost" id="ckreset" style="margin-left:auto">Reset</button></div><div id="ckboard" class="board" style="margin-top:8px"></div></div>`;
  const boardEl=root.querySelector('#ckboard'), turnEl=root.querySelector('#ckturn'), resetBtn=root.querySelector('#ckreset');
  const darks=new Set(); for(let r=0;r<8;r++) for(let c=0;c<8;c++) if((r+c)%2===1) darks.add(r*8+c);
  let board=[], blueTurn=true, sel=null;
  function start(){ board=Array(64).fill(null); for(let r=0;r<3;r++) for(let c=0;c<8;c++) if((r+c)%2===1) board[r*8+c]='B'; for(let r=5;r<8;r++) for(let c=0;c<8;c++) if((r+c)%2===1) board[r*8+c]='R'; blueTurn=true; sel=null; draw(); }
  function draw(){ boardEl.innerHTML=''; boardEl.style.gridTemplateColumns='repeat(8,48px)'; for(let r=0;r<8;r++) for(let c=0;c<8;c++){ const i=r*8+c; const el=document.createElement('div'); el.className='sq'; el.style.width='48px'; el.style.height='48px'; el.style.borderRadius='6px'; el.style.display='grid'; el.style.placeItems='center'; el.style.cursor = darks.has(i)?'pointer':'default'; el.style.background = darks.has(i)? '#0c1734':'#071026'; if(sel===i) el.style.outline='2px solid rgba(28,125,255,0.14)'; el.textContent = board[i]? (board[i][0]==='B'?'🔵':'🔴') + (board[i].length>1?'👑':'') : ''; if(darks.has(i)) el.onclick = ()=> onClick(i); boardEl.appendChild(el); } turnEl.textContent = 'Turn: '+(blueTurn?'🔵 Blue':'🔴 Red'); }
  function movesFrom(i){ const r=Math.floor(i/8), c=i%8, me=board[i]; if(!me) return []; const dir = me[0]==='B'?1:-1; const kings = me.length>1; const dirs = kings? [1,-1]:[dir]; const out=[]; for(const dr of dirs) for(const dc of [-1,1]){ const r1=r+dr,c1=c+dc,r2=r+2*dr,c2=c+2*dc; if(r1>=0&&r1<8&&c1>=0&&c1<8 && !board[r1*8+c1]) out.push([i,r1*8+c1,false]); if(r2>=0&&r2<8&&c2>=0&&c2<8 && board[r1*8+c1] && board[r1*8+c1][0]!==me[0] && !board[r2*8+c2]) out.push([i,r2*8+c2,r1*8+c1]); } return out; }
  function mustJump(color){ for(let i=0;i<64;i++) if(board[i]&&board[i][0]===color) if(movesFrom(i).some(m=>m[2]!==false)) return true; return false; }
  function onClick(i){ if(sel===null){ if(board[i] && (blueTurn?board[i][0]==='B':board[i][0]==='R')) sel=i; else sel=null; draw(); return; } if(i===sel){ sel=null; draw(); return; } const legal=movesFrom(sel); const mv=legal.find(m=>m[1]===i && (!mustJump(blueTurn?'B':'R') || m[2]!==false)); if(!mv){ sel=null; draw(); return; } board[i]=board[sel]; board[sel]=null; if(board[i][0]==='B' && Math.floor(i/8)===7) board[i]='B*'; if(board[i][0]==='R' && Math.floor(i/8)===0) board[i]='R*'; if(mv[2]!==false){ board[mv[2]] = null; sel=i; if(movesFrom(i).some(m=>m[2]!==false)){ draw(); return; } } sel=null; blueTurn=!blueTurn; draw(); }
  resetBtn.onclick = start; start();
}

/* ----------------- CHESS (basic moves) ----------------- */
function initChess(root){
  root.innerHTML = `<div class="card"><div style="display:flex;gap:8px;align-items:center"><div id="chturn">Turn: ♙ White</div><button class="btn ghost" id="chreset" style="margin-left:auto">Reset</button></div><div id="chboard" class="board" style="margin-top:8px"></div></div>`;
  const icons={'P':'♙','R':'♖','N':'♘','B':'♗','Q':'♕','K':'♔','p':'♟','r':'♜','n':'♞','b':'♝','q':'♛','k':'♚'};
  const boardEl=root.querySelector('#chboard'), turnEl=root.querySelector('#chturn'), resetBtn=root.querySelector('#chreset');
  let board=[], white=true, sel=null;
  function setup(){ board = [...'rnbqkbnrpppppppp................................PPPPPPPP.RNBQKBNR'].map(ch=>ch==='.'?'':ch); while(board.length<64) board.push(''); white=true; sel=null; draw(); }
  function draw(){ boardEl.innerHTML=''; boardEl.style.gridTemplateColumns='repeat(8,48px)'; for(let r=0;r<8;r++) for(let c=0;c<8;c++){ const i=r*8+c; const el=document.createElement('div'); el.className='sq'; el.style.width='48px'; el.style.height='48px'; el.style.borderRadius='6px'; el.style.display='grid'; el.style.placeItems='center'; el.style.cursor='pointer'; el.style.background = ((r+c)%2)===1? '#0c1734':'#071026'; if(sel===i) el.style.outline='2px solid rgba(28,125,255,0.14)'; el.textContent = icons[board[i]]||''; el.onclick=()=> click(i); boardEl.appendChild(el); } turnEl.textContent = 'Turn: '+(white?'♙ White':'♟ Black'); }
  function get(i){ return board[i]||''; } function colorOf(p){ return p && (p===p.toUpperCase()?'w':'b'); }
  function lineMoves(i,dr,dc){ const r0=Math.floor(i/8), c0=i%8, out=[]; let r=r0+dr,c=c0+dc; while(r>=0&&r<8&&c>=0&&c<8){ const j=r*8+c, t=get(j); if(!t) out.push(j); else{ if(colorOf(t)!==colorOf(get(i))) out.push(j); break; } r+=dr;c+=dc; } return out; }
  function moves(i){ const p=get(i); if(!p) return []; const isW=p===p.toUpperCase(); const r=Math.floor(i/8), c=i%8, out=[]; if(p.toUpperCase()==='P'){ const dir=isW?-1:1; const f=r+dir; if(f>=0&&f<8 && !get(f*8+c)) out.push(f*8+c); const home=isW?6:1; if(r===home && !get((r+2*dir)*8+c)) out.push((r+2*dir)*8+c); for(const dc of [-1,1]){ const cc=c+dc; if(cc<0||cc>7) continue; const j=f*8+cc; if(get(j) && colorOf(get(j))!==colorOf(p)) out.push(j); } } else if(p.toUpperCase()==='N'){ const steps=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]]; for(const [dr,dc] of steps){ const rr=r+dr, cc=c+dc; if(rr<0||rr>7||cc<0||cc>7) continue; const j=rr*8+cc; if(!get(j) || colorOf(get(j))!==colorOf(p)) out.push(j); } } else if(p.toUpperCase()==='B') [[1,1],[1,-1],[-1,1],[-1,-1]].forEach(d=>out.push(...lineMoves(i,d[0],d[1]))); else if(p.toUpperCase()==='R') [[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>out.push(...lineMoves(i,d[0],d[1]))); else if(p.toUpperCase()==='Q') [[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]].forEach(d=>out.push(...lineMoves(i,d[0],d[1]))); else if(p.toUpperCase()==='K') for(let dr=-1;dr<=1;dr++) for(let dc=-1;dc<=1;dc++){ if(!dr&&!dc) continue; const rr=r+dr, cc=c+dc; if(rr<0||rr>7||cc<0||cc>7) continue; const j=rr*8+cc; if(!get(j) || colorOf(get(j))!==colorOf(p)) out.push(j); } return out; }
  function click(i){ const p=get(i); if(sel===null){ if(p && ((white && colorOf(p)==='w') || (!white && colorOf(p)==='b'))) sel=i; draw(); return; } if(i===sel){ sel=null; draw(); return; } const legal = moves(sel); if(!legal.includes(i)){ sel=null; draw(); return; } board[i]=board[sel]; board[sel]=''; sel=null; if(board[i]==='P' && Math.floor(i/8)===0) board[i]='Q'; if(board[i]==='p' && Math.floor(i/8)===7) board[i]='q'; white=!white; draw(); }
  resetBtn.onclick = setup; setup();
}

/* ----------------- POOL ----------------- */
function initPool(root){
  root.innerHTML = `<div class="card"><div style="display:flex;gap:8px;align-items:center"><button class="btn" id="plreset">Rack</button><div id="plmsg" class="small" style="margin-left:auto"></div></div><canvas id="pool-c" width="900" height="420" style="margin-top:10px"></canvas></div>`;
  const canvas = root.querySelector('#pool-c'), ctx=canvas.getContext('2d'), msg=root.querySelector('#plmsg');
  const W=canvas.width, H=canvas.height, R=10; let balls=[];
  function rack(){ balls=[{x:W*0.25,y:H/2,vx:0,vy:0,color:'#fff'},{x:W*0.65,y:H/2,vx:0,vy:0,color:'#ffd700'}]; msg.textContent='Rack set. Drag to shoot.'; }
  function draw(){ ctx.clearRect(0,0,W,H); ctx.fillStyle='#071834'; ctx.fillRect(0,0,W,H); for(const b of balls){ ctx.beginPath(); ctx.arc(b.x,b.y,R,0,Math.PI*2); ctx.fillStyle=b.color; ctx.fill(); ctx.strokeStyle='rgba(0,0,0,0.25)'; ctx.stroke(); } }
  let dragging=false, start=null;
  canvas.addEventListener('mousedown', e=>{ const r=canvas.getBoundingClientRect(); start={x:e.clientX-r.left,y:e.clientY-r.top}; dragging=true; });
  canvas.addEventListener('mouseup', e=>{ if(!dragging) return; dragging=false; const r=canvas.getBoundingClientRect(); const end={x:e.clientX-r.left,y:e.clientY-r.top}; const dx=balls[0].x-end.x, dy=balls[0].y-end.y; balls[0].vx += dx*0.06; balls[0].vy += dy*0.06; msg.textContent='Shot!'; beep(700,0.06,'square'); });
  function step(){ for(const b of balls){ b.x+=b.vx; b.y+=b.vy; b.vx*=0.994; b.vy*=0.994; if(b.x<R){ b.x=R; b.vx*=-0.9 } if(b.x>W-R){ b.x=W-R; b.vx*=-0.9 } if(b.y<R){ b.y=R; b.vy*=-0.9 } if(b.y>H-R){ b.y=H-R; b.vy*=-0.9 } } if(balls.length>1){ const a=balls[0], b=balls[1]; const dx=b.x-a.x, dy=b.y-a.y, dist=Math.hypot(dx,dy), min=R*2; if(dist>0 && dist<min){ const nx=dx/dist, ny=dy/dist; const p=(a.vx-b.vx)*nx + (a.vy-b.vy)*ny; if(p>0){ const imp=2*p/2; a.vx -= imp*nx; a.vy -= imp*ny; b.vx += imp*nx; b.vy += imp*ny; } const overlap=min-dist; a.x-=nx*overlap/2; a.y-=ny*overlap/2; b.x+=nx*overlap/2; b.y+=ny*overlap/2; } } draw(); requestAnimationFrame(step); }
  root.querySelector('#plreset').onclick = rack; rack(); step();
}

/* helpers */
function format(n){ return '$'+Number(n).toLocaleString(); }
</script>
</body>
</html>
